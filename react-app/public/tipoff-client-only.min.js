var Tipoff=function(){function p(e,t){var n=new(window.XMLHttpRequest||window.ActiveXObject)("MSXML2.XMLHTTP.3.0");n.open("POST",Tipoff.url,1),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-type","application/json"),n.onreadystatechange=function(){3<n.readyState&&t&&t(n.responseText,n)},n.send(JSON.stringify(e))}var i=function(){window.addEventListener("error",function(e){var t={eventType:"unhandled",eventTitle:e.message,note:e.filename+" - lineNo:"+e.lineno+" - columnNo:"+e.colno,sendStackTrace:!0,error:e.error};this.user&&(t.user=this.user),window.Tipoff.sendTip(t)}),window.addEventListener("unhandledrejection",function(e){var t={eventType:"unhandled",eventTitle:e.reason.message,sendStackTrace:!0,error:e};this.user&&(t.user=this.user),window.Tipoff.sendTip(t)})};return{version:"0.0.1",sendTip:function(e){try{if(!this.projectId||0===this.projectId.length||!this.url||0===this.url.length)return console.log("Tipoff setup is invalid. Call Tipoff.setup(<projectId>, <apiURL>) before sending Tips."),!1;if(!e)return console.log("Invalid arguments. Tip was not sent."),!1;var t=e.eventType;if(!t||t.length<=0)return console.log("eventType is missing.Tip was not sent. "),!1;var n=e.eventTitle;if(!n||n.length<=0)return console.log("eventTitle is missing.Tip was not sent. "),!1;var i=!!e.sendStackTrace&&e.sendStackTrace,s=e.error,o=e.tags?e.tags:[],r=e.note?e.note:[],a=e.user,c=e.callback,l=!!e.captureScreenshot&&e.captureScreenshot,d={projectId:this.projectId,eventType:t,eventTitle:n,tags:o,note:r,user:a};if(i){var u="";if(s)u=s.reason&&s.reason.stack?s.reason.stack:s.stack;else try{throw new Error}catch(e){u=e.stack}d.eventStack={stackTrace:u}}l?window.html2canvas(document.body,{allowTaint:!0,foreignObjectRendering:!0,height:document.querySelector("body").scrollHeight}).then(function(e){var t,n,i,s,o;d.screenshot=LZString.compressToUTF16((t=e,n=1080,i=document.createElement("canvas"),s=i.getContext("2d"),o=n/t.width,i.width=o*t.width,i.height=o*t.height,s.scale(o,o),s.drawImage(t,0,0),i.toDataURL())),p(d,c)}):p(d,c)}catch(e){console.log(e)}},setup:function(e,t,n){return e&&0!==e.length?t&&0!==t.length?(this.projectId=e,this.url=t,this.user=n,void i()):(console.log("Tipoff setup is invalid. Valid url for Add Tip API is required. Tips will not be sent."),!1):(console.log("Tipoff setup is invalid. Valid projectId is required. Tips will not be sent."),!1)}}}();